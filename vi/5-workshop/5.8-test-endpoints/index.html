<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="viethoangpham1204@gmail.com"><link rel=icon href=../../../images/favicon.png type=image/png><title>Test Endpoints End-to-End :: Báo cáo thực tập</title>
<link href=../../../css/nucleus.css?1765683798 rel=stylesheet><link href=../../../css/fontawesome-all.min.css?1765683798 rel=stylesheet><link href=../../../css/hybrid.css?1765683798 rel=stylesheet><link href=../../../css/featherlight.min.css?1765683798 rel=stylesheet><link href=../../../css/perfect-scrollbar.min.css?1765683798 rel=stylesheet><link href=../../../css/auto-complete.css?1765683798 rel=stylesheet><link href=../../../css/atom-one-dark-reasonable.css?1765683798 rel=stylesheet><link href=../../../css/theme.css?1765683798 rel=stylesheet><link href=../../../css/hugo-theme.css?1765683798 rel=stylesheet><link href=../../../css/theme-workshop.css?1765683798 rel=stylesheet><script src=../../../js/jquery-3.3.1.min.js?1765683798></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../../vi/5-workshop/5.8-test-endpoints/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../../js/lunr.min.js?1765683798></script><script type=text/javascript src=../../../js/auto-complete.js?1765683798></script><script type=text/javascript>var baseurl="https://hviethub.github.io/Internship-Report//vi"</script><script type=text/javascript src=../../../js/search.js?1765683798></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/1-worklog/ title="Nhật ký công việc" class=dd-item><a href=../../../vi/1-worklog/><b>1. </b>Nhật ký công việc
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/1-worklog/1.2-week2/ title="Worklog Tuần 2" class=dd-item><a href=../../../vi/1-worklog/1.2-week2/><b>1.2. </b>Worklog Tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.1-week1/ title="Worklog Tuần 1" class=dd-item><a href=../../../vi/1-worklog/1.1-week1/><b>1.1. </b>Worklog Tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.3-week3/ title="Worklog Tuần 3" class=dd-item><a href=../../../vi/1-worklog/1.3-week3/><b>1.3. </b>Worklog Tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.4-week4/ title="Worklog Tuần 4" class=dd-item><a href=../../../vi/1-worklog/1.4-week4/><b>1.4. </b>Worklog Tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.5-week5/ title="Worklog Tuần 5" class=dd-item><a href=../../../vi/1-worklog/1.5-week5/><b>1.5. </b>Worklog Tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.6-week6/ title="Worklog Tuần 6" class=dd-item><a href=../../../vi/1-worklog/1.6-week6/><b>1.6. </b>Worklog Tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.7-week7/ title="Worklog Tuần 7" class=dd-item><a href=../../../vi/1-worklog/1.7-week7/><b>1.7. </b>Worklog Tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.8-week8/ title="Worklog Tuần 8" class=dd-item><a href=../../../vi/1-worklog/1.8-week8/><b>1.8. </b>Worklog Tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.9-week9/ title="Worklog Tuần 9" class=dd-item><a href=../../../vi/1-worklog/1.9-week9/><b>1.9. </b>Worklog Tuần 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.10-week10/ title="Worklog Tuần 10" class=dd-item><a href=../../../vi/1-worklog/1.10-week10/><b>1.10. </b>Worklog Tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.11-week11/ title="Worklog Tuần 11" class=dd-item><a href=../../../vi/1-worklog/1.11-week11/><b>1.11. </b>Worklog Tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.12-week12/ title="Worklog Tuần 12" class=dd-item><a href=../../../vi/1-worklog/1.12-week12/><b>1.12 </b>Worklog Tuần 12
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/2-proposal/ title="Đề xuất dự án" class=dd-item><a href=../../../vi/2-proposal/><b>2. </b>Đề xuất dự án
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/ title="Các bài blogs đã dịch" class=dd-item><a href=../../../vi/3-blogstranslated/><b>3. </b>Các bài blogs đã dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../../vi/3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../../vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../../vi/3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/4-eventparticipated/ title="Các events đã tham gia" class=dd-item><a href=../../../vi/4-eventparticipated/><b>4. </b>Các events đã tham gia
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/4-eventparticipated/4.1-event1/ title="Sự kiện 1" class=dd-item><a href=../../../vi/4-eventparticipated/4.1-event1/><b>4.1. </b>Sự kiện 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.2-event2/ title="Sự kiện 2" class=dd-item><a href=../../../vi/4-eventparticipated/4.2-event2/><b>4.2. </b>Sự kiện 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.3-event3/ title="Sự kiện 3" class=dd-item><a href=../../../vi/4-eventparticipated/4.3-event3/><b>4.3. </b>Sự kiện 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.4-event4/ title="Sự kiện 4" class=dd-item><a href=../../../vi/4-eventparticipated/4.4-event4/><b>4.4. </b>Sự kiện 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.5-event5/ title="Sự kiện 5" class=dd-item><a href=../../../vi/4-eventparticipated/4.5-event5/><b>4.5. </b>Sự kiện 5
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/ title=Workshop class="dd-item
parent"><a href=../../../vi/5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.1-workshop-overview/ title="Tổng quan Workshop" class=dd-item><a href=../../../vi/5-workshop/5.1-workshop-overview/><b>5.1. </b>Tổng quan Workshop
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.2-setup-environment/ title="Cài đặt môi trường" class=dd-item><a href=../../../vi/5-workshop/5.2-setup-environment/><b>5.2. </b>Cài đặt môi trường
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-cdk-bootstrap/ title="CDK Bootstrap" class=dd-item><a href=../../../vi/5-workshop/5.3-cdk-bootstrap/><b>5.3. </b>CDK Bootstrap
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-configure-stacks/ title="Cấu hình Infrastructure Stacks" class=dd-item><a href=../../../vi/5-workshop/5.4-configure-stacks/><b>5.4. </b>Cấu hình Infrastructure Stacks
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.5-deploy-infrastructure/ title="Deploy Infrastructure" class=dd-item><a href=../../../vi/5-workshop/5.5-deploy-infrastructure/><b>5.5. </b>Deploy Infrastructure
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.6-configure-api-lambda/ title="Cấu hình API & Lambda" class=dd-item><a href=../../../vi/5-workshop/5.6-configure-api-lambda/><b>5.6. </b>Cấu hình API & Lambda
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-deploy-backend/ title="Deploy Backend Services" class=dd-item><a href=../../../vi/5-workshop/5.7-deploy-backend/><b>5.7. </b>Deploy Backend Services
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.8-test-endpoints/ title="Test Endpoints End-to-End" class="dd-item
active"><a href=../../../vi/5-workshop/5.8-test-endpoints/><b>5.8. </b>Test Endpoints End-to-End
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.9-push-gitlab/ title="Push lên GitLab" class=dd-item><a href=../../../vi/5-workshop/5.9-push-gitlab/><b>5.9. </b>Push lên GitLab
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.10-deploy-amplify/ title="Deploy lên Amplify" class=dd-item><a href=../../../vi/5-workshop/5.10-deploy-amplify/><b>5.10. </b>Deploy lên Amplify
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-cleanup/ title="Dọn dẹp" class=dd-item><a href=../../../vi/5-workshop/5.11-cleanup/><b>5.11. </b>Dọn dẹp
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/6-self-evaluation/ title="Tự đánh giá" class=dd-item><a href=../../../vi/6-self-evaluation/><b>6. </b>Tự đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=../../../vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://hviethub.github.io/Internship-Report/5-workshop/5.8-test-endpoints/>English</option><option id=vi value=https://hviethub.github.io/Internship-Report/vi/5-workshop/5.8-test-endpoints/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../../vi/>Báo cáo thực tập</a> > <a href=../../../vi/5-workshop/>Workshop</a> > Test Endpoints End-to-End</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Test Endpoints End-to-End</h1><h4 id=tổng-quan>Tổng quan</h4><p>Sau khi deploy backend, bạn cần test tất cả endpoints để đảm bảo hệ thống hoạt động đúng từ đầu đến cuối.</p><h4 id=luồng-testing>Luồng Testing</h4><pre tabindex=0><code>1. Test Health Check
2. Test Đăng ký người dùng
3. Test Xác minh Email
4. Test Đăng nhập
5. Test Quản lý Profile
6. Test Tính năng Social (Posts, Comments, Likes)
7. Test Tính năng Recipe
8. Test Tính năng AI (Bedrock)
9. Test Upload File (S3 + CloudFront)
10. Test Tìm kiếm (OpenSearch)
</code></pre><h4 id=bước-1-thiết-lập-môi-trường-testing>Bước 1: Thiết lập môi trường Testing</h4><p><strong>1. Cài đặt công cụ Testing</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Cài đặt Postman (khuyến nghị)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Tải từ: https://www.postman.com/downloads/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Hoặc sử dụng curl cho command-line testing</span>
</span></span></code></pre></div><p><strong>2. Đặt biến môi trường</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Đặt API endpoint</span>
</span></span><span style=display:flex><span>export API_ENDPOINT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://api.everyonecook.cloud&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Hoặc cho PowerShell</span>
</span></span><span style=display:flex><span>$API_ENDPOINT <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://api.everyonecook.cloud&#34;</span>
</span></span></code></pre></div><h4 id=bước-2-test-health-check>Bước 2: Test Health Check</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Test health endpoint (không cần auth)</span>
</span></span><span style=display:flex><span>curl $API_ENDPOINT/health
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Response mong đợi:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   &#34;status&#34;: &#34;healthy&#34;,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#   &#34;timestamp&#34;: &#34;2024-01-01T00:00:00.000Z&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># }</span>
</span></span></code></pre></div><p><img alt="Health Check" src=../../../images/5-Workshop/5.8-test-endpoints/health-check.png>
<em>Ảnh chụp: Postman hiển thị health check thành công</em></p><h4 id=bước-3-test-đăng-ký-người-dùng>Bước 3: Test Đăng ký người dùng</h4><p><strong>1. Đăng ký người dùng mới</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Lấy User Pool Client ID</span>
</span></span><span style=display:flex><span>CLIENT_ID<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>aws cloudformation describe-stacks <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --stack-name EveryoneCook-dev-Auth <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --query <span style=color:#e6db74>&#39;Stacks[0].Outputs[?OutputKey==`UserPoolClientId`].OutputValue&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --output text<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Đăng ký user</span>
</span></span><span style=display:flex><span>aws cognito-idp sign-up <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --client-id $CLIENT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --username testuser <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --password TestPassword123! <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --user-attributes <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    Name<span style=color:#f92672>=</span>email,Value<span style=color:#f92672>=</span>test@example.com <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    Name<span style=color:#f92672>=</span>given_name,Value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Test User&#34;</span>
</span></span></code></pre></div><p><strong>Mong đợi:</strong> Thông báo thành công với mã xác nhận gửi đến email</p><p><strong>2. Xác minh Pre-Signup Trigger</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Kiểm tra CloudWatch logs cho Pre-Signup trigger</span>
</span></span><span style=display:flex><span>aws logs tail /aws/lambda/EveryoneCook-dev-PreSignUpTrigger --since 5m
</span></span></code></pre></div><h4 id=bước-4-test-xác-minh-email>Bước 4: Test Xác minh Email</h4><p><strong>1. Lấy mã xác minh</strong></p><p>Kiểm tra email để lấy mã xác minh (6 chữ số)</p><p><strong>2. Xác nhận người dùng</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Xác nhận user với mã</span>
</span></span><span style=display:flex><span>aws cognito-idp confirm-sign-up <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --client-id $CLIENT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --username testuser <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --confirmation-code <span style=color:#ae81ff>123456</span>
</span></span></code></pre></div><p><strong>3. Xác minh Post-Confirmation Trigger</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Kiểm tra xem user profile đã được tạo trong DynamoDB chưa</span>
</span></span><span style=display:flex><span>aws dynamodb get-item <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --table-name EveryoneCook-dev <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --key <span style=color:#e6db74>&#39;{&#34;PK&#34;:{&#34;S&#34;:&#34;USER#testuser&#34;},&#34;SK&#34;:{&#34;S&#34;:&#34;PROFILE&#34;}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Phải trả về user profile với:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - PK: USER#testuser</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - SK: PROFILE</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - userId: cognito-sub-id</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - email: test@example.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - fullName: Test User</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - birthday: null</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - gender: null</span>
</span></span><span style=display:flex><span><span style=color:#75715e># - country: null</span>
</span></span></code></pre></div><p><img alt="User Profile đã tạo" src=../../../images/5-Workshop/5.8-test-endpoints/user-profile-created.png>
<em>Ảnh chụp: DynamoDB hiển thị user profile được tạo bởi trigger</em></p><h4 id=bước-5-test-đăng-nhập>Bước 5: Test Đăng nhập</h4><p><strong>1. Đăng nhập</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Đăng nhập để lấy tokens</span>
</span></span><span style=display:flex><span>TOKENS<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>aws cognito-idp initiate-auth <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --client-id $CLIENT_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --auth-flow USER_PASSWORD_AUTH <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --auth-parameters USERNAME<span style=color:#f92672>=</span>testuser,PASSWORD<span style=color:#f92672>=</span>TestPassword123!<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Trích xuất tokens</span>
</span></span><span style=display:flex><span>ACCESS_TOKEN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo $TOKENS | jq -r <span style=color:#e6db74>&#39;.AuthenticationResult.AccessToken&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>ID_TOKEN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo $TOKENS | jq -r <span style=color:#e6db74>&#39;.AuthenticationResult.IdToken&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>REFRESH_TOKEN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo $TOKENS | jq -r <span style=color:#e6db74>&#39;.AuthenticationResult.RefreshToken&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;ID Token: </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p><strong>2. Xác minh Post-Authentication Trigger</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Kiểm tra xem lastLoginAt đã được cập nhật chưa</span>
</span></span><span style=display:flex><span>aws dynamodb get-item <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --table-name EveryoneCook-dev <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --key <span style=color:#e6db74>&#39;{&#34;PK&#34;:{&#34;S&#34;:&#34;USER#testuser&#34;},&#34;SK&#34;:{&#34;S&#34;:&#34;PROFILE&#34;}}&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --projection-expression <span style=color:#e6db74>&#34;lastLoginAt&#34;</span>
</span></span></code></pre></div><h4 id=bước-6-test-quản-lý-profile>Bước 6: Test Quản lý Profile</h4><p><strong>1. Lấy Profile</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Lấy user profile</span>
</span></span><span style=display:flex><span>curl -X GET <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/auth/profile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Dữ liệu user profile</span>
</span></span></code></pre></div><p><strong>2. Cập nhật Profile</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Cập nhật profile (onboarding)</span>
</span></span><span style=display:flex><span>curl -X PUT <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;birthday&#34;: &#34;1990-01-01&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;gender&#34;: &#34;male&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;country&#34;: &#34;US&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/auth/profile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Profile đã cập nhật</span>
</span></span></code></pre></div><p><strong>3. Xác minh cập nhật trong DynamoDB</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Kiểm tra profile đã cập nhật</span>
</span></span><span style=display:flex><span>aws dynamodb get-item <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --table-name EveryoneCook-dev <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --key <span style=color:#e6db74>&#39;{&#34;PK&#34;:{&#34;S&#34;:&#34;USER#testuser&#34;},&#34;SK&#34;:{&#34;S&#34;:&#34;PROFILE&#34;}}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Phải hiển thị birthday, gender, country đã cập nhật</span>
</span></span></code></pre></div><p><img alt="Profile đã cập nhật" src=../../../images/5-Workshop/5.8-test-endpoints/profile-updated.png>
<em>Ảnh chụp: Postman hiển thị cập nhật profile thành công</em></p><h4 id=bước-7-test-tính-năng-social>Bước 7: Test Tính năng Social</h4><p><strong>1. Tạo Post</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Tạo một post</span>
</span></span><span style=display:flex><span>POST_RESPONSE<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;content&#34;: &#34;Bài đăng đầu tiên của tôi trên EveryoneCook!&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;visibility&#34;: &#34;public&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/social/posts<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>POST_ID<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo $POST_RESPONSE | jq -r <span style=color:#e6db74>&#39;.postId&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Đã tạo post: </span>$POST_ID<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p><strong>2. Lấy Posts Feed</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Lấy posts</span>
</span></span><span style=display:flex><span>curl -X GET <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/social/posts
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Mảng posts bao gồm post vừa tạo</span>
</span></span></code></pre></div><p><strong>3. Like Post</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Like post</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/social/posts/$POST_ID/like
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Thông báo thành công</span>
</span></span></code></pre></div><p><strong>4. Comment trên Post</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Thêm comment</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{&#34;content&#34;:&#34;Bài viết hay!&#34;}&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/social/posts/$POST_ID/comment
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Comment đã tạo</span>
</span></span></code></pre></div><p><img alt="Tính năng Social" src=../../../images/5-Workshop/5.8-test-endpoints/social-features.png>
<em>Ảnh chụp: Postman hiển thị tạo post và tương tác</em></p><h4 id=bước-8-test-tính-năng-recipe>Bước 8: Test Tính năng Recipe</h4><p><strong>1. Tạo Recipe</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Tạo một recipe</span>
</span></span><span style=display:flex><span>RECIPE_RESPONSE<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;title&#34;: &#34;Phở Bò (Phở Bò Việt Nam)&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;description&#34;: &#34;Phở bò truyền thống Việt Nam&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;ingredients&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      {&#34;name&#34;: &#34;xương bò&#34;, &#34;amount&#34;: &#34;2&#34;, &#34;unit&#34;: &#34;kg&#34;},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      {&#34;name&#34;: &#34;bánh phở&#34;, &#34;amount&#34;: &#34;500&#34;, &#34;unit&#34;: &#34;g&#34;},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      {&#34;name&#34;: &#34;gừng&#34;, &#34;amount&#34;: &#34;1&#34;, &#34;unit&#34;: &#34;củ&#34;}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;instructions&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;Ninh xương bò trong 2 giờ&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;Thêm gia vị và hầm&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;Chuẩn bị bánh phở và dọn ra&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;cuisine&#34;: &#34;Vietnamese&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;difficulty&#34;: &#34;medium&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;prepTime&#34;: 30,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;cookTime&#34;: 120
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/recipes<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>RECIPE_ID<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo $RECIPE_RESPONSE | jq -r <span style=color:#e6db74>&#39;.recipeId&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Đã tạo recipe: </span>$RECIPE_ID<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p><strong>2. Lấy Recipes</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Lấy tất cả recipes</span>
</span></span><span style=display:flex><span>curl -X GET <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/recipes
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Mảng recipes</span>
</span></span></code></pre></div><p><strong>3. Lấy Recipe theo ID</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Lấy recipe cụ thể</span>
</span></span><span style=display:flex><span>curl -X GET <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/recipes/$RECIPE_ID
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Chi tiết recipe</span>
</span></span></code></pre></div><h4 id=bước-9-test-tính-năng-ai>Bước 9: Test Tính năng AI</h4><p><strong>1. Tạo Recipe với AI</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Tạo recipe sử dụng Bedrock</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;ingredients&#34;: [&#34;gà&#34;, &#34;cơm&#34;, &#34;rau&#34;],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;cuisine&#34;: &#34;Vietnamese&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;dietaryRestrictions&#34;: [&#34;gluten-free&#34;],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;servings&#34;: 4
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/ai/generate-recipe
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Recipe do AI tạo (mất 5-10 giây)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Response bao gồm tên nguyên liệu tiếng Việt</span>
</span></span></code></pre></div><p><img alt="Tạo Recipe AI" src=../../../images/5-Workshop/5.8-test-endpoints/ai-recipe.png>
<em>Ảnh chụp: Postman hiển thị recipe do AI tạo với tên tiếng Việt</em></p><p><strong>2. Dịch nguyên liệu</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Dịch nguyên liệu sang tiếng Việt</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;ingredient&#34;: &#34;tomato&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;targetLanguage&#34;: &#34;vi&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/ai/translate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: {&#34;translation&#34;: &#34;cà chua&#34;, &#34;confidence&#34;: 0.99}</span>
</span></span></code></pre></div><h4 id=bước-10-test-upload-file>Bước 10: Test Upload File</h4><p><strong>1. Yêu cầu Pre-signed URL</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Lấy pre-signed URL cho avatar upload</span>
</span></span><span style=display:flex><span>UPLOAD_RESPONSE<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;fileType&#34;: &#34;avatar&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;fileName&#34;: &#34;avatar.jpg&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;contentType&#34;: &#34;image/jpeg&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;fileSize&#34;: 1024000
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/upload/presigned-url<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>PRESIGNED_URL<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo $UPLOAD_RESPONSE | jq -r <span style=color:#e6db74>&#39;.url&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>UPLOAD_KEY<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo $UPLOAD_RESPONSE | jq -r <span style=color:#e6db74>&#39;.key&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Pre-signed URL: </span>$PRESIGNED_URL<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Upload Key: </span>$UPLOAD_KEY<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p><strong>2. Upload File lên S3</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Tạo test image</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Test image content&#34;</span> &gt; test-avatar.jpg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Upload sử dụng pre-signed URL</span>
</span></span><span style=display:flex><span>curl -X PUT <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: image/jpeg&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --upload-file test-avatar.jpg <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#34;</span>$PRESIGNED_URL<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: 200 OK</span>
</span></span></code></pre></div><p><strong>3. Đánh dấu Upload hoàn tất</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Thông báo backend rằng upload đã hoàn tất</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#34;{\&#34;key\&#34;:\&#34;</span>$UPLOAD_KEY<span style=color:#e6db74>\&#34;}&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/upload/complete
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Thông báo thành công</span>
</span></span></code></pre></div><p><strong>4. Truy cập qua CloudFront</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Truy cập file qua CloudFront CDN</span>
</span></span><span style=display:flex><span>curl -I https://cdn.everyonecook.cloud/$UPLOAD_KEY
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Request đầu tiên: X-Cache: Miss from cloudfront</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Request thứ hai: X-Cache: Hit from cloudfront</span>
</span></span></code></pre></div><p><img alt="Upload File" src=../../../images/5-Workshop/5.8-test-endpoints/file-upload.png>
<em>Ảnh chụp: CloudFront cache headers hiển thị Miss rồi Hit</em></p><h4 id=bước-11-test-tìm-kiếm-opensearch>Bước 11: Test Tìm kiếm (OpenSearch)</h4><p><strong>Nếu OpenSearch được bật:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Tìm kiếm recipes với query tiếng Việt</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;query&#34;: &#34;phở bò&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;filters&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;cuisine&#34;: &#34;Vietnamese&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;difficulty&#34;: &#34;medium&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;limit&#34;: 10
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/ai/search
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Mảng recipes khớp</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Vietnamese analyzer xử lý: &#34;phở bò&#34; = &#34;pho bo&#34; = &#34;beef noodle soup&#34;</span>
</span></span></code></pre></div><h4 id=bước-12-test-tính-năng-admin>Bước 12: Test Tính năng Admin</h4><p><strong>1. Liệt kê Users (Chỉ Admin)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Lấy tất cả users (yêu cầu admin role)</span>
</span></span><span style=display:flex><span>curl -X GET <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer </span>$ID_TOKEN<span style=color:#e6db74>&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  $API_ENDPOINT/admin/users
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Mong đợi: Mảng users hoặc 403 Forbidden nếu không phải admin</span>
</span></span></code></pre></div><h4 id=bước-13-xác-minh-async-processing>Bước 13: Xác minh Async Processing</h4><p><strong>1. Kiểm tra SQS Queue Processing</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Gửi message đến SearchIndex queue</span>
</span></span><span style=display:flex><span>QUEUE_URL<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>aws sqs list-queues <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --queue-name-prefix EveryoneCook-dev-SearchIndexQueue <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  | jq -r <span style=color:#e6db74>&#39;.QueueUrls[0]&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>aws sqs send-message <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --queue-url $QUEUE_URL <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --message-body <span style=color:#e6db74>&#34;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    \&#34;eventName\&#34;: \&#34;INSERT\&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    \&#34;tableName\&#34;: \&#34;recipes\&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    \&#34;keys\&#34;: {\&#34;PK\&#34;: \&#34;USER#testuser\&#34;, \&#34;SK\&#34;: \&#34;RECIPE#</span>$RECIPE_ID<span style=color:#e6db74>\&#34;},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    \&#34;newImage\&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      \&#34;title\&#34;: \&#34;Pho Bo\&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      \&#34;ingredients\&#34;: [\&#34;beef\&#34;, \&#34;noodles\&#34;],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      \&#34;cuisine\&#34;: \&#34;Vietnamese\&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  }&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Kiểm tra worker logs</span>
</span></span><span style=display:flex><span>aws logs tail /aws/lambda/EveryoneCook-dev-SearchSyncWorker --follow
</span></span></code></pre></div><h4 id=checklist-testing>Checklist Testing</h4><ul><li><input disabled type=checkbox> Health check phản hồi</li><li><input disabled type=checkbox> Đăng ký user hoạt động</li><li><input disabled type=checkbox> Xác minh email hoạt động</li><li><input disabled type=checkbox> Đăng nhập thành công</li><li><input disabled type=checkbox> Các thao tác CRUD profile hoạt động</li><li><input disabled type=checkbox> Có thể tạo posts</li><li><input disabled type=checkbox> Có thể like posts</li><li><input disabled type=checkbox> Có thể thêm comments</li><li><input disabled type=checkbox> Có thể tạo recipes</li><li><input disabled type=checkbox> Tạo recipe AI hoạt động</li><li><input disabled type=checkbox> Dịch nguyên liệu hoạt động</li><li><input disabled type=checkbox> Upload file lên S3 hoạt động</li><li><input disabled type=checkbox> CloudFront phục vụ files</li><li><input disabled type=checkbox> Tìm kiếm hoạt động (nếu OpenSearch bật)</li><li><input disabled type=checkbox> SQS queues xử lý messages</li><li><input disabled type=checkbox> Tất cả Lambda functions thực thi không có lỗi</li></ul><h4 id=benchmarks-hiệu-suất>Benchmarks hiệu suất</h4><p><strong>Thời gian phản hồi mong đợi:</strong></p><ul><li>Health check: &lt; 50ms</li><li>Đăng nhập: &lt; 200ms</li><li>Lấy profile: &lt; 100ms</li><li>Tạo post: &lt; 300ms</li><li>Lấy posts feed: &lt; 500ms</li><li>Tạo recipe AI: 5-10 giây</li><li>Upload file (pre-signed URL): &lt; 100ms</li><li>Truy vấn tìm kiếm: &lt; 200ms</li></ul><h4 id=bước-tiếp-theo>Bước tiếp theo</h4><p>Sau khi tất cả tests pass, tiến hành <a href=../../../vi/5-workshop/5.9-push-gitlab/>Push lên GitLab</a> để version control code và thiết lập CI/CD.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../../vi/5-workshop/5.7-deploy-backend/ title="Deploy Backend Services"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../../vi/5-workshop/5.9-push-gitlab/ title="Push lên GitLab" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../../js/clipboard.min.js?1765683798></script><script src=../../../js/perfect-scrollbar.min.js?1765683798></script><script src=../../../js/perfect-scrollbar.jquery.min.js?1765683798></script><script src=../../../js/jquery.sticky.js?1765683798></script><script src=../../../js/featherlight.min.js?1765683798></script><script src=../../../js/highlight.pack.js?1765683798></script><script>hljs.initHighlightingOnLoad()</script><script src=../../../js/modernizr.custom-3.6.0.js?1765683798></script><script src=../../../js/learn.js?1765683798></script><script src=../../../js/hugo-learn.js?1765683798></script><link href=../../../mermaid/mermaid.css?1765683798 rel=stylesheet><script src=../../../mermaid/mermaid.js?1765683798></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>